<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		*{
			padding: 0;
			margin: 0;
		}
		img{
			display: block;
			width: 200px;
			border: 0;
		}
		.container{
			position: relative;
		}
		.imgShow{
			position: absolute;
			float: left;
			border:solid 1px #ccc;
			padding:10px;
			-webkit-transition: all .7s ease-out .1s;
		    -moz-transition: all .7s ease-out .1s;
		    -o-transition: all .7s ease-out .1s;
		    /*transition: all .7s ease-out .1s;*/
		    transition: all .7s cubic-bezier(0.18, 0.89, 0.32, 1.28) .1s;
		}

	</style>
</head>
<body>
	<div class="container">
		<div class="imgShow" ><a href="./images/temp_img02.jpg"><img src="./images/temp_img02.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img03.jpg"><img src="./images/temp_img03.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img04.jpg"><img src="./images/temp_img04.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img05.jpg"><img src="./images/temp_img05.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img06.jpg"><img src="./images/temp_img06.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img07.jpg"><img src="./images/temp_img07.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img08.jpg"><img src="./images/temp_img08.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img09.jpg"><img src="./images/temp_img09.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img10.jpg"><img src="./images/temp_img10.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img11.jpg"><img src="./images/temp_img11.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img12.jpg"><img src="./images/temp_img12.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img13.jpg"><img src="./images/temp_img13.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img14.jpg"><img src="./images/temp_img14.jpg"></a></div>
		<div class="imgShow" ><a href="./images/temp_img15.jpg"><img src="./images/temp_img15.jpg"></a></div>
	</div>

<script src="js/jquery-1.8.3.min.js"></script>
<script>
(function(){

function WaterFall(){
	var _this = this;
	this.margin = 10;
	this.items = $('.imgShow');
	this.container = $('.container');
	this.singleItemWidth = this.items[0].offsetWidth + this.margin;

	$(window).resize(function(event) {
		/* Act on the event */
		_this.init();
	});


}
WaterFall.prototype = {
	init : function(){
		var itemHeightArray = [];
		var colMaxNumber = Math.floor($(window).width() / this.singleItemWidth);
		//	将包裹层居中显示
		if($(window).width() > this.singleItemWidth){
			this.container.css('left', ($(window).width() - (colMaxNumber * this.singleItemWidth)) / 2);
		}
		

		for(var i = 0; i < this.items.length; i++){
			if(i < colMaxNumber){
				itemHeightArray[i] = this.items[i].offsetHeight + this.margin;
				this.items[i].style.top = 0;
				this.items[i].style.left = i * this.singleItemWidth + 'px';
			}else{
				var minHeight = Math.min.apply(null, itemHeightArray);
				var minHeightIndex = $.inArray(minHeight, itemHeightArray);
				this.items[i].style.position = 'absolute';
				this.items[i].style.top = minHeight + 'px';
				// this.items[i].style.left = this.items[minHeightIndex].offsetLeft + 'px';
				this.items[i].style.left = minHeightIndex * this.singleItemWidth + 'px';

				itemHeightArray[minHeightIndex] += this.items[i].offsetHeight + this.margin;


				// //	取出数组中最小高度的下标
				// var innsertColumn = this.min(itemHeightArray);
				// //	当前要放置的元素的高度加上边距
				// var imgHeight = this.items[i].offsetHeight + this.margin;

				// this.items[i].style.top = itemHeightArray[innsertColumn] + 'px';
				// this.items[i].style.left = innsertColumn * this.singleItemWidth + 'px';
				// itemHeightArray[innsertColumn] += imgHeight;
			}	

		}

			
	},
	min : function(heightAarry){
		var minColumn = 0;
		var minHeight = heightAarry[minColumn];
		for (var i = 1,len=heightAarry.length; i < len; i++) {
			var temp = heightAarry[i];
			if (temp < minHeight) {
				minColumn = i;
				minHeight = temp;
			};
		};
		return minColumn;
	}
};




new WaterFall().init();
















})();






</script>
</body>
</html>